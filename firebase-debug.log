[debug] [2020-06-28T14:51:56.713Z] ----------------------------------------------------------------------
[debug] [2020-06-28T14:51:56.715Z] Command:       /home/dan/.nvm/versions/node/v10.15.3/bin/node /home/dan/.nvm/versions/node/v10.15.3/bin/firebase emulators:start
[debug] [2020-06-28T14:51:56.715Z] CLI Version:   8.4.3
[debug] [2020-06-28T14:51:56.715Z] Platform:      linux
[debug] [2020-06-28T14:51:56.715Z] Node Version:  v10.15.3
[debug] [2020-06-28T14:51:56.715Z] Time:          Sun Jun 28 2020 16:51:56 GMT+0200 (Central European Summer Time)
[debug] [2020-06-28T14:51:56.715Z] ----------------------------------------------------------------------
[debug] [2020-06-28T14:51:56.715Z] 
[debug] [2020-06-28T14:51:56.719Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-06-28T14:51:56.720Z] > authorizing via signed-in user
[info] i  emulators: Starting emulators: firestore, hosting {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: firestore, hosting"}}
[debug] [2020-06-28T14:51:56.730Z] [hub] writing locator at /tmp/hub-vbpool-c4db0.json
[debug] [2020-06-28T14:51:56.737Z] Ignoring unsupported arg: projectId {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: projectId"}}
[debug] [2020-06-28T14:51:56.738Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2020-06-28T14:51:56.738Z] Starting Firestore Emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/home/dan/.cache/firebase/emulators/cloud-firestore-emulator-v1.11.4.jar","--host","localhost","--port",8081,"--rules","/home/dan/code/vbpool-frontend/firestore.rules"],"optionalArgs":["port","webchannel_port","host","rules","functions_emulator","seed_from_export"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Duser.language=en\",\"-jar\",\"/home/dan/.cache/firebase/emulators/cloud-firestore-emulator-v1.11.4.jar\",\"--host\",\"localhost\",\"--port\",8081,\"--rules\",\"/home/dan/code/vbpool-frontend/firestore.rules\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"functions_emulator\",\"seed_from_export\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2020-06-28T14:51:57.468Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2020-06-28T14:51:57.469Z] localhost:8081
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=localhost:8081

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"localhost:8081\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=localhost:8081\n\nDev App Server is now running.\n\n"}}
[debug] [2020-06-28T14:51:57.501Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/vbpool-c4db0/webApps/-/config  
 
[debug] [2020-06-28T14:51:58.253Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Sun, 28 Jun 2020 14:51:58 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-27=\":443\"; ma=2592000,h3-25=\":443\"; ma=2592000,h3-T050=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] i  hosting[vbpool]: Serving hosting files from: dist {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mdist\u001b[22m"}}
[info] ✔  hosting[vbpool]: Local server: http://localhost:5000 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://localhost:5000\u001b[22m\u001b[24m"}}
[info] 
┌──────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your apps. │
└──────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┐
│ Emulator  │ Host:Port      │
├───────────┼────────────────┤
│ Firestore │ localhost:8081 │
├───────────┼────────────────┤
│ Hosting   │ localhost:5000 │
└───────────┴────────────────┘
  Other reserved ports: 4400

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2020-06-28T14:52:01.617Z] Jun 28, 2020 4:52:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:02.152Z] Jun 28, 2020 4:52:02 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:02 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:52:02.482Z] Jun 28, 2020 4:52:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:02.504Z] Jun 28, 2020 4:52:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:05.810Z] Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:05.895Z] Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:05.902Z] Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:05.909Z] Jun 28, 2020 4:52:05 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:52:05.928Z] Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:05.946Z] Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:06.052Z] Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:06.146Z] Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:06.234Z] Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.248Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.252Z] Jun 28, 2020 4:52:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:52:41.273Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.297Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.309Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.314Z] Jun 28, 2020 4:52:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:52:41.327Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.342Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.400Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.495Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:41.576Z] Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:57.557Z] Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:57.562Z] Jun 28, 2020 4:52:57 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:57 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:52:57.588Z] Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:57.675Z] Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:58.424Z] Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:58.450Z] Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:58.499Z] Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:52:58.716Z] Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:52:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:53:08.138Z] Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:53:08.141Z] Jun 28, 2020 4:53:08 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:53:08 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:53:08.184Z] Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:53:08.220Z] Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:53:08.357Z] Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:53:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:54:08.233Z] Jun 28, 2020 4:54:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:54:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:54:08.237Z] Jun 28, 2020 4:54:08 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:54:08 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:55:22.062Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        allow read:  if parentDoc().userId == request.auth.uid;\n        allow write: if parentDoc().userId == request.auth.uid &&\n                        parentDoc().flags.isPaid == false &&\n                        resource.data.page1.meta.poolName != request.data.page1.meta.poolName;\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:55:22.071Z] Jun 28, 2020 4:55:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:22.167Z] Jun 28, 2020 4:55:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:22.274Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[debug] [2020-06-28T14:55:28.869Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.872Z] Jun 28, 2020 4:55:28 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:55:28.885Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.899Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.904Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.907Z] Jun 28, 2020 4:55:28 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:55:28.916Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.923Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:28.993Z] Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:29.062Z] Jun 28, 2020 4:55:29 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L31
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:29 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nINFO: operation failed: \nNull value error. for 'create' @ L31\n"}}
[debug] [2020-06-28T14:55:29.074Z] Jun 28, 2020 4:55:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:29 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:29.078Z] Jun 28, 2020 4:55:29 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:29 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:55:39.673Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        allow read:  if parentDoc().userId == request.auth.uid;\n        allow write: if parentDoc().userId == request.auth.uid &&\n                        parentDoc().flags.isPaid == false &&\n                        resource.data.page1.meta.poolName == request.data.page1.meta.poolName;\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:55:39.681Z] Jun 28, 2020 4:55:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:39.757Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[debug] [2020-06-28T14:55:43.545Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.631Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.636Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.639Z] Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:55:43.647Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.655Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.733Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.760Z] Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L31
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nINFO: operation failed: \nNull value error. for 'create' @ L31\n"}}
[debug] [2020-06-28T14:55:43.779Z] Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:43.783Z] Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:43 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2020-06-28T14:55:45.389Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.423Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.427Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.431Z] Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:55:45.438Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.448Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.506Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.518Z] Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
INFO: operation failed: 
Null value error. for 'create' @ L31
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nINFO: operation failed: \nNull value error. for 'create' @ L31\n"}}
[debug] [2020-06-28T14:55:45.556Z] Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:55:45.558Z] Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:55:45 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2020-06-28T14:56:15.436Z] Jun 28, 2020 4:56:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:56:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:56:45.428Z] Jun 28, 2020 4:56:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:56:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:56:45.440Z] Jun 28, 2020 4:56:45 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:56:45 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:58:03.054Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow read:  if isOwn();\n        allow create: if isOwn() &&\n                        parentDoc().flags.isPaid == false &&\n                        resource.data.page1.meta.poolName == request.data.page1.meta.poolName;\n        allow update: if\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:58:03.059Z] Jun 28, 2020 4:58:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:58:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:58:03.105Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"270"}
[warn] ⚠  firestore.rules:39:7 - ERROR Missing conditional expression after 'if'. 
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:58:24.088Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow read:   if isOwn();\n        allow create: if isOwn() &&\n                         parentDoc().flags.isPaid == false\n        allow update: if isOwn() &&\n                        resource.data.page1.meta.poolName == request.data.page1.meta.poolName;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:58:24.093Z] Jun 28, 2020 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:58:24.176Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:59:05.016Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                        resource.data.page1.meta.poolName == request.data.page1.meta.poolName;\n                         parentDoc().flags.isPaid == false\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:59:05.019Z] Jun 28, 2020 4:59:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:05.054Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"252"}
[warn] ⚠  firestore.rules:38:26 - ERROR Unexpected 'parentDoc'. 
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T14:59:20.543Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                         resource.data.page1.meta.poolName == request.data.page1.meta.poolName &&\n                         parentDoc().flags.isPaid == false;\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T14:59:20.549Z] Jun 28, 2020 4:59:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:20.603Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[debug] [2020-06-28T14:59:36.962Z] Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:36.965Z] Jun 28, 2020 4:59:36 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:36 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:59:36.976Z] Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:36.996Z] Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.008Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.011Z] Jun 28, 2020 4:59:37 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T14:59:37.019Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.024Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.084Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.183Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.196Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.211Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:37.265Z] Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:41.747Z] Jun 28, 2020 4:59:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T14:59:41.779Z] Jun 28, 2020 4:59:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 4:59:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:13.607Z] Jun 28, 2020 5:00:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:13.716Z] Jun 28, 2020 5:00:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:14.740Z] Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:14.767Z] Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:14.813Z] Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:15.023Z] Jun 28, 2020 5:00:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T15:00:20.210Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() && request.resource.data.flags.isPaid == false) || isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                         resource.data.page1.meta.poolName == request.data.page1.meta.poolName &&\n                         parentDoc().flags.isPaid == false;\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T15:00:20.215Z] Jun 28, 2020 5:00:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:20.272Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[debug] [2020-06-28T15:00:37.192Z] Jun 28, 2020 5:00:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:37.202Z] Jun 28, 2020 5:00:37 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:37 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2020-06-28T15:00:45.042Z] Jun 28, 2020 5:00:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:56.952Z] Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:56.954Z] Jun 28, 2020 5:00:56 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:56 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T15:00:56.970Z] Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:56.990Z] Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:00:57.209Z] Jun 28, 2020 5:00:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:00:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:03.393Z] Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:03.396Z] Jun 28, 2020 5:01:03 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:03 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T15:01:03.424Z] Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:03.452Z] Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:03.724Z] Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:49.357Z] Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:49.360Z] Jun 28, 2020 5:01:49 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:49 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T15:01:49.396Z] Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:49.427Z] Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:01:49.652Z] Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:01:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:02:11.841Z] Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:02:11.843Z] Jun 28, 2020 5:02:11 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt
WARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:02:11 PM com.google.cloud.datastore.emulator.impl.context.EmulatorAuthorization warnAboutSecuredJwt\nWARNING: expected an unsecured JWT, the emulator does not validate JWTs and IS NOT SECURE\n"}}
[debug] [2020-06-28T15:02:11.856Z] Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:02:11.870Z] Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:02:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:02:12.023Z] Jun 28, 2020 5:02:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:02:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:03:11.894Z] Jun 28, 2020 5:03:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:03:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:03:11.904Z] Jun 28, 2020 5:03:11 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:03:11 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T15:03:40.312Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (isOwn() &&\n                request.resource.data.flags.isPaid == false\n               ) ||\n               isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                         resource.data.page1.meta.poolName == request.data.page1.meta.poolName &&\n                         parentDoc().flags.isPaid == false;\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T15:03:40.316Z] Jun 28, 2020 5:03:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:03:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:03:40.370Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T15:05:50.288Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function getDoc() {\n        return request.resource.data;\n      }\n\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (\n                 isOwn() &&\n                 request.resource.data.flags.isPaid == false\n                 request.resource.data.\n               ) ||\n               isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                         resource.data.page1.meta.poolName == request.data.page1.meta.poolName &&\n                         parentDoc().flags.isPaid == false;\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T15:05:50.294Z] Jun 28, 2020 5:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:05:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:05:50.336Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"248"}
[warn] ⚠  firestore.rules:29:18 - ERROR Unexpected 'request'. 
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2020-06-28T15:07:00.548Z] >>> HTTP REQUEST PUT http://localhost:8081/emulator/v1/projects/vbpool-c4db0:securityRules  
 {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    function isAdmin() {\n       return request.auth.token.role == 'admin';\n    }\n\n    function signedIn() {\n      return request.auth.uid != null;\n    }\n\n    match /pools/{pool} {\n      function getDoc() {\n        return resource.data;\n      }\n\n      function getReq() {\n        return resource.data;\n      }\n\n      function isOwn() {\n        return request.resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function readGuard() {\n        return resource.data.userId == request.auth.uid || isAdmin();\n      }\n\n      function writeGuard() {\n        return (\n                 isOwn() &&\n                 getDoc().flags.isPaid == false &&\n                 getDoc().meta.poolName == getReq().meta.poolName\n               ) ||\n               isAdmin();\n      }\n\n      function parentDoc() {\n        return get(/databases/$(database)/documents/pools/$(pool)).data\n      }\n\n      match /forms/{form} {\n        function isOwn() {\n          return parentDoc().userId == request.auth.uid;\n        }\n\n        allow get:    if isOwn();\n        allow create: if isOwn();\n        allow update: if isOwn() &&\n                         resource.data.page1.meta.poolName == request.data.page1.meta.poolName &&\n                         parentDoc().flags.isPaid == false;\n        allow delete: if isOwn() &&\n                         parentDoc().flags.isPaid == false;\n\n      }\n\n      allow create: if signedIn()\n                    && writeGuard();\n      allow read:   if signedIn()\n                    && readGuard();\n      allow update: if signedIn()\n                    && readGuard()\n                    && writeGuard();\n      allow delete: if signedIn()\n                    && readGuard()\n                    && writeGuard()\n                    && resource.data.flags.isPaid == false;\n    }\n  }\n}\n"}]}}
[debug] [2020-06-28T15:07:00.552Z] Jun 28, 2020 5:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jun 28, 2020 5:07:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2020-06-28T15:07:00.629Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  firestore: Rules updated. 
